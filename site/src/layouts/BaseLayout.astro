---
import "aero-slider/slider.css";
import "../styles/global.css";

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      href="https://fonts.gstatic.com/s/inter/v20/UcC73FwrK3iLTeHuS_nVMrMxCp50SjIa1ZL7W0Q5nw.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=block"
      rel="stylesheet"
    />
    <!-- Hero slider defaults match config form to prevent layout shift before JS -->
    <style is:inline id="hero-defaults">
      #hero-slider{--slides-per-view:1;--slide-gap:10px}
    </style>
    <slot name="head" />
  </head>
  <body class="bg-slate-50 text-slate-900 selection:bg-indigo-100 selection:text-indigo-900">
    <!-- Critical: inject hero slider CSS from URL params before first paint -->
    <script is:inline>
      (function(){
        var q = typeof location !== 'undefined' && location.search;
        if (!q || q.length < 2) return;
        var p = new URLSearchParams(q);
        var SPV = [1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.75,2,2.5,3,4,5];
        var parts = [];
        var spvIdx = parseInt(p.get('spv'), 10);
        var spvVal = 1;
        if (!isNaN(spvIdx) && spvIdx >= 0 && spvIdx < SPV.length) {
          spvVal = SPV[spvIdx];
          parts.push('--slides-per-view:' + spvVal);
        }
        var gap = parseInt(p.get('gap'), 10);
        if (!isNaN(gap) && gap >= 0 && gap <= 32) {
          parts.push('--slide-gap:' + gap + 'px');
        }
        var loop = p.get('loop') === '1' || p.get('loop') === 'on' || p.get('loop') === 'true';
        var isFractional = spvVal > 0 && spvVal % 1 !== 0;
        if (parts.length) {
          var s = document.createElement('style');
          s.id = 'config-inline';
          s.textContent = '#hero-slider{' + parts.join(';') + '}';
          document.head.appendChild(s);
        }
        if (loop && isFractional) {
          document.documentElement.setAttribute('data-aero-defer-hero', '');
          var s2 = document.createElement('style');
          s2.id = 'config-inline-defer';
          s2.textContent = '[data-aero-defer-hero] #hero-slider .aero-slider__track::before{content:"";flex:0 0 max(0px,calc(50% - (100% - var(--slide-gap,0px) * (var(--slides-per-view,1) - 1)) / (2 * var(--slides-per-view,1)) - var(--slide-gap,0px)));scroll-snap-align:none}[data-aero-defer-hero] #hero-slider .aero-slider__track>*{scroll-snap-align:center}';
          document.head.appendChild(s2);
        }
      })();
    </script>
    <slot />
  </body>
</html>
